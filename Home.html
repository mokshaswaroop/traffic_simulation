<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Traffic Simulator — Model. Simulate. Optimize Road Traffic.</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --ring: rgba(37,99,235,0.35);
      --bg:#0b1220;
      --surface: rgba(11,18,32,0.94);
      --surface-2: rgba(15,26,46,0.92);
      --border: rgba(148,163,184,0.18);
      --brand1:#0ea5e9;
      --brand2:#22c55e;
    }
    html,body{font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
    .bg-canvas{
      position: relative;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(96,165,250,0.22), transparent 60%),
        radial-gradient(900px 500px at 10% 110%, rgba(34,197,94,0.16), transparent 60%),
        linear-gradient(180deg, rgba(14,165,233,0.10), rgba(34,197,94,0.06)),
        var(--bg);
      min-height: 100vh; overflow-x: clip; isolation:isolate;
    }
    .bg-canvas::before{
      content:""; position:absolute; inset:0;
      background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 48px 48px, 48px 48px;
      mask-image: radial-gradient(1200px 600px at 50% 20%, rgba(0,0,0,0.5), transparent 75%);
      pointer-events:none; z-index:-1;
    }
    .focus-ring:focus{ outline:none; box-shadow:0 0 0 4px var(--ring); }
    .btn-primary{ position:relative; overflow:hidden; }
    .btn-primary::after{ content:""; position:absolute; inset:-200% -50% auto -50%; width:80%; height:200%; transform:rotate(25deg) translateX(-120%); background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent); transition:transform .6s ease; pointer-events:none; }
    .btn-primary:hover::after{ transform:rotate(25deg) translateX(200%); }
    .glass{
      background: linear-gradient(180deg, var(--surface), var(--surface-2));
      backdrop-filter: blur(12px) saturate(115%);
      border: 1px solid var(--border);
      box-shadow: 0 20px 60px rgba(2,6,23,0.45), inset 0 1px 0 rgba(255,255,255,0.04);
    }
    /* Animations and helpers */
    @keyframes dash { to { stroke-dashoffset: -120; } }
    .dash-anim { animation: dash 10s linear infinite; }
    .modal-hidden{ opacity:0; pointer-events:none; }
    .modal-shown{ opacity:1; pointer-events:auto; }
    .modal-backdrop{ background: radial-gradient(1200px 800px at 50% 30%, rgba(2,6,23,0.78), rgba(2,6,23,0.94)); }
    .slideover-wrap{ opacity:0; pointer-events:none; transition: opacity .25s ease; }
    .slideover-wrap.open{ opacity:1; pointer-events:auto; }
    .slideover-backdrop{ background: rgba(2,6,23,0.6); backdrop-filter: blur(2px); }
    .slideover-panel{
      width: 100%; max-width: 460px; height: 100%;
      background: linear-gradient(180deg, rgba(8,20,40,0.97), rgba(8,20,40,0.94));
      border-left: 1px solid var(--border);
      box-shadow: -24px 0 60px rgba(2,6,23,0.55);
      transform: translateX(100%);
      transition: transform .35s cubic-bezier(.22,.8,.22,1);
    }
    .slideover-wrap.open .slideover-panel{ transform: translateX(0); }
    .input-elev{ transition: border-color .2s ease, box-shadow .2s ease; }
    .input-elev:focus{ border-color: rgba(148,163,184,0.35); box-shadow: 0 0 0 4px rgba(14,165,233,0.12); }
    #listWrapper{ scrollbar-width: thin; }
    #listWrapper::-webkit-scrollbar{ width:8px; }
    #listWrapper::-webkit-scrollbar-thumb{ background: rgba(148,163,184,0.35); border-radius: 9999px; }
  </style>
</head>
<body class="bg-canvas text-slate-100">
  <!-- Navigation -->
  <header class="sticky top-0 z-30 backdrop-blur bg-[#0b1220]/60 border-b border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="#" class="flex items-center gap-2 group">
          <span class="inline-grid place-items-center h-9 w-9 rounded-xl bg-gradient-to-br from-sky-500 to-emerald-500 text-white shadow-lg shadow-emerald-900/30">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="6" y="2" width="12" height="20" rx="3" stroke="white" opacity=".9"/>
              <circle cx="12" cy="7" r="2" fill="#ef4444"/>
              <circle cx="12" cy="12" r="2" fill="#f59e0b"/>
              <circle cx="12" cy="17" r="2" fill="#22c55e"/>
            </svg>
          </span>
          <div>
            <span class="block text-sm tracking-widest text-slate-300">TRAFFIC</span>
            <span class="block -mt-1 font-extrabold text-lg">Simulator</span>
          </div>
        </a>

        <nav class="hidden md:flex items-center gap-8">
          <a href="#" class="text-slate-300 hover:text-white transition">Home</a>
          <a href="#about" class="text-slate-300 hover:text-white transition">About</a>
          <a href="#simulator" class="text-slate-300 hover:text-white transition">Simulator</a>
          <a href="#contact" class="text-slate-300 hover:text-white transition">Contact</a>
        </nav>

        <button id="menuBtn" aria-label="Open menu" class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-xl glass hover:bg-white/10 transition focus-ring">
          <svg id="menuIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
          </svg>
        </button>
      </div>
    </div>

    <div id="mobileMenu" class="md:hidden hidden border-t border-white/10">
      <div class="px-4 py-3 space-y-2">
        <a href="#" class="block px-3 py-2 rounded-lg hover:bg-white/10">Home</a>
        <a href="#about" class="block px-3 py-2 rounded-lg hover:bg-white/10">About</a>
        <a href="#simulator" class="block px-3 py-2 rounded-lg hover:bg-white/10">Simulator</a>
        <a href="#contact" class="block px-3 py-2 rounded-lg hover:bg-white/10">Contact</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-14 lg:pt-20 pb-10 lg:pb-16">
      <div class="grid lg:grid-cols-2 gap-10 items-center">
        <div>
          <h1 class="text-4xl sm:text-5xl font-extrabold leading-tight">Traffic Simulator</h1>
          <p class="mt-4 text-lg text-slate-300 max-w-xl">Model. Simulate. Optimize Road Traffic.</p>

          <div class="mt-6 flex flex-wrap items-center gap-3">
            <span class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm bg-emerald-500/15 text-emerald-300 ring-1 ring-emerald-400/25">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M5 12l4 4M5 12l4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Fast scenario setup
            </span>
            <span class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm bg-sky-500/15 text-sky-300 ring-1 ring-sky-400/25">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Real-time results
            </span>
          </div>

          <div class="mt-8 flex items-center gap-4">
            <a href="#register" class="btn-primary inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-emerald-500 px-5 py-3 font-semibold text-white shadow-lg hover:shadow-emerald-900/40 transition">
              Get Started
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M13 5l6 7-6 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </a>
            <a href="#about" class="inline-flex items-center gap-2 rounded-xl px-5 py-3 font-semibold text-slate-200 glass hover:bg-white/10 transition">
              Learn More
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </a>
          </div>
        </div>

        <div class="relative">
          <div class="aspect-[16/10] rounded-2xl border border-white/10 glass overflow-hidden">
            <svg viewBox="0 0 1200 750" class="w-full h-full">
              <defs>
                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#0ea5e9" stop-opacity="0.18"/>
                  <stop offset="100%" stop-color="#22c55e" stop-opacity="0.18"/>
                </linearGradient>
              </defs>
              <rect width="1200" height="750" fill="url(#g1)"/>
              <path d="M-50,650 C150,550 300,720 450,600 C600,480 700,690 860,560 C1020,430 1140,650 1250,520" fill="none" stroke="#0f172a" stroke-width="56" opacity="0.65"/>
              <path class="dash-anim" d="M-50,650 C150,550 300,720 450,600 C600,480 700,690 860,560 C1020,430 1140,650 1250,520" fill="none" stroke="#93c5fd" stroke-width="8" stroke-linecap="round" stroke-dasharray="24 32" stroke-dashoffset="0" opacity="0.9"/>
              <g transform="translate(220,520)">
                <rect x="-18" y="-54" width="36" height="108" rx="10" fill="#0f172a" opacity=".85" stroke="#1e293b"/>
                <circle cx="0" cy="-28" r="9" fill="#ef4444"/>
                <circle cx="0" cy="0" r="9" fill="#f59e0b"/>
                <circle cx="0" cy="28" r="9" fill="#22c55e"/>
              </g>
              <g transform="translate(360,620)">
                <rect x="-36" y="-18" rx="10" width="72" height="36" fill="#38bdf8" stroke="#0ea5e9" opacity=".95"/>
                <circle cx="-18" cy="20" r="8" fill="#0b1220"/><circle cx="18" cy="20" r="8" fill="#0b1220"/>
              </g>
              <g transform="translate(820,580)">
                <rect x="-30" y="-15" rx="10" width="60" height="30" fill="#34d399" stroke="#10b981" opacity=".95"/>
                <circle cx="-14" cy="17" r="7" fill="#0b1220"/><circle cx="14" cy="17" r="7" fill="#0b1220"/>
              </g>
            </svg>
          </div>
          <div class="absolute -bottom-4 left-6 flex items-center gap-3 text-slate-300">
            <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
            <span class="text-sm">Smooth traffic flow illustration</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Register + About -->
  <section id="register" class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-16">
      <div class="grid lg:grid-cols-2 gap-8">
        <!-- Registration Card -->
        <div class="p-6 sm:p-8 rounded-2xl glass border border-white/10 shadow-xl">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h2 class="text-2xl font-bold">Create your account</h2>
            </div>
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-500 to-sky-500 grid place-items-center text-white shadow-lg">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M7 7v11M17 7v11M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </div>
          </div>

          <form id="signupForm" class="mt-6 space-y-4" novalidate>
            <div>
              <label class="block text-sm text-slate-300 mb-2" for="fullName">Vehicle Owner Name</label>
              <input id="fullName" name="fullName" type="text" required placeholder="Jordan Smith"
                     class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring" />
              <p class="mt-2 hidden text-rose-400 text-sm" id="nameErr">Please enter the vehicle owner's name.</p>
            </div>
            <div>
              <label class="block text-sm text-slate-300 mb-2" for="email">Email Address</label>
              <input id="email" name="email" type="email" required placeholder="owner@example.com"
                     class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
              <p class="mt-2 hidden text-rose-400 text-sm" id="emailErr">Please enter a valid email.</p>
            </div>
            <div class="grid sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="password">Password</label>
                <input id="password" name="password" type="password" required minlength="6" placeholder="Create a password"
                       class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
                <p class="mt-2 hidden text-rose-400 text-sm" id="passErr">Use at least 6 characters.</p>
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="confirm">Confirm Password</label>
                <input id="confirm" name="confirm" type="password" required placeholder="Re-enter password"
                       class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
                <p class="mt-2 hidden text-rose-400 text-sm" id="confirmErr">Passwords don’t match.</p>
              </div>
            </div>

            <div class="grid sm:grid-cols-3 gap-4">
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="vehicleType">Vehicle Type</label>
                <div class="relative">
                  <select id="vehicleType" name="vehicleType" required class="input-elev w-full appearance-none rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 focus-ring">
                    <option value="" disabled selected>Select type</option>
                    <option>Car</option>
                    <option>Motorbike</option>
                    <option>Bus</option>
                    <option>Truck</option>
                  </select>
                  <span class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-slate-400">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                  </span>
                </div>
                <p class="mt-2 hidden text-rose-400 text-sm" id="vehicleTypeErr">Please choose a vehicle type.</p>
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="plate">Vehicle Plate Number</label>
                <input id="plate" name="plate" type="text" required placeholder="ABC-1234" class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
                <p class="mt-2 hidden text-rose-400 text-sm" id="plateErr">Please enter a valid plate number.</p>
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="phone">Phone Number</label>
                <input id="phone" name="phone" type="tel" required placeholder="(555) 123-4567" class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
                <p class="mt-2 hidden text-rose-400 text-sm" id="phoneErr">Please enter a valid phone number.</p>
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-3">
              <button type="submit"
                class="btn-primary flex-1 justify-center inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-emerald-500 px-5 py-3 font-semibold text-white shadow-lg hover:shadow-emerald-900/40 transition" onclick ="window.location.href='map.html'">
                Create Account
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M13 5l6 7-6 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </button>
              <button id="viewAccountsBtn" type="button"
                class="flex-1 justify-center inline-flex items-center gap-2 rounded-xl px-5 py-3 font-semibold text-slate-200 glass hover:bg-white/10 transition">
                View saved accounts
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              </button>
            </div>

            <p class="text-center text-sm text-slate-300">
              Already have an account?
              <a id="openLogin" href="#" class="text-sky-400 hover:text-sky-300 underline underline-offset-4">Log in</a>
            </p>

            <div id="success" class="hidden mt-4 rounded-xl border border-emerald-500/30 bg-emerald-500/10 text-emerald-200 px-4 py-3">
              ✅ Registration saved to your device. This is a demo—no server involved.
            </div>
            <p class="text-xs text-slate-400 mt-2">Note: Saved locally in your browser. Clearing browser data will remove entries.</p>
          </form>
        </div>

        <!-- About -->
        <div id="about" class="p-6 sm:p-8 rounded-2xl glass border border-white/10">
          <h3 class="text-xl font-bold">Why this platform?</h3>
          <p class="mt-2 text-slate-300">
            Build scenarios, test signal timings, and evaluate congestion—all in one place.
          </p>

          <div class="mt-6 grid sm:grid-cols-2 gap-4">
            <div class="rounded-xl p-4 bg-[#0f1a2e] border border-white/10">
              <div class="h-10 w-10 rounded-lg grid place-items-center bg-sky-500/20 text-sky-300 mb-3">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 12h16M4 12l4 4M4 12l4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              </div>
              <div class="font-semibold">Scenario Modeling</div>
              <p class="text-sm text-slate-400 mt-1">Flexible layouts and adjustable flows.</p>
            </div>
            <div class="rounded-xl p-4 bg-[#0f1a2e] border border-white/10">
              <div class="h-10 w-10 rounded-lg grid place-items-center bg-emerald-500/20 text-emerald-300 mb-3">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              </div>
              <div class="font-semibold">Live Simulation</div>
              <p class="text-sm text-slate-400 mt-1">See impacts as you tweak settings.</p>
            </div>
            <div class="rounded-xl p-4 bg-[#0f1a2e] border border-white/10">
              <div class="h-10 w-10 rounded-lg grid place-items-center bg-sky-500/20 text-sky-300 mb-3">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </div>
              <div class="font-semibold">Export Insights</div>
              <p class="text-sm text-slate-400 mt-1">Share results with your team.</p>
            </div>
            <div class="rounded-xl p-4 bg-[#0f1a2e] border border-white/10">
              <div class="h-10 w-10 rounded-lg grid place-items-center bg-emerald-500/20 text-emerald-300 mb-3">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              </div>
              <div class="font-semibold">Team Ready</div>
              <p class="text-sm text-slate-400 mt-1">Built for students to engineers.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Simulator teaser -->
  <section id="simulator" class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-16">
      <div class="p-6 sm:p-8 rounded-2xl glass border border-white/10">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <div>
            <h3 class="text-xl font-bold">Simulator Preview</h3>
            <p class="text-slate-300 mt-1">Adjust inputs to see traffic density change.</p>
          </div>
          <div class="flex gap-2">
            <button id="densityLow" class="rounded-xl px-4 py-2 bg-[#0f1a2e] hover:bg-white/10 transition">Low</button>
            <button id="densityMed" class="rounded-xl px-4 py-2 bg-[#0f1a2e] hover:bg-white/10 transition">Medium</button>
            <button id="densityHigh" class="rounded-xl px-4 py-2 bg-[#0f1a2e] hover:bg-white/10 transition">High</button>
          </div>
        </div>

        <div class="mt-6 rounded-xl overflow-hidden border border-white/10">
          <div class="bg-[#0f1a2e] px-4 py-3 text-slate-300 text-sm">Road Network</div>
          <div class="bg-[#0b1220] p-5">
            <div class="relative h-56 rounded-lg border border-white/10 overflow-hidden">
              <svg viewBox="0 0 600 260" class="absolute inset-0 w-full h-full">
                <rect width="600" height="260" fill="transparent"/>
                <rect x="0" y="60" width="600" height="32" rx="6" fill="#111827"/>
                <rect x="0" y="140" width="600" height="32" rx="6" fill="#111827"/>
                <rect x="0" y="220" width="600" height="32" rx="6" fill="#111827"/>
                <rect x="120" y="0" width="32" height="260" rx="6" fill="#111827"/>
                <rect x="300" y="0" width="32" height="260" rx="6" fill="#111827"/>
                <rect x="480" y="0" width="32" height="260" rx="6" fill="#111827"/>
              </svg>
              <div id="carField" class="absolute inset-0"></div>
            </div>
          </div>
        </div>
        <p class="mt-3 text-xs text-slate-400">This is a lightweight visual—full simulation runs inside the platform.</p>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-20">
      <div class="grid md:grid-cols-2 gap-8">
        <div class="p-6 sm:p-8 rounded-2xl glass border border-white/10">
          <h3 class="text-xl font-bold">Contact</h3>
          <p class="text-slate-300 mt-1">Have questions or ideas? We’d love to hear from you.</p>

          <form id="contactForm" class="mt-6 grid gap-4" novalidate>
            <div class="grid sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="cname">Your Name</label>
                <input id="cname" type="text" placeholder="Jordan Smith" required
                  class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring">
                <p id="cnameErr" class="hidden mt-2 text-rose-400 text-sm">Please enter your name.</p>
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2" for="cemail">Your Email</label>
                <input id="cemail" type="email" placeholder="you@example.com" required
                  class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring">
                <p id="cemailErr" class="hidden mt-2 text-rose-400 text-sm">Please enter a valid email.</p>
              </div>
            </div>
            <div>
              <label class="block text-sm text-slate-300 mb-2" for="cmsg">Message</label>
              <textarea id="cmsg" rows="4" placeholder="How can we help?" required
                class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 px-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"></textarea>
              <p id="cmsgErr" class="hidden mt-2 text-rose-400 text-sm">Please enter a message.</p>
            </div>
            <div class="flex items-center gap-3">
              <button class="btn-primary inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-emerald-500 px-5 py-3 font-semibold text-white shadow-lg hover:shadow-emerald-900/40 transition">
                Send Message
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12l14-7-7 14-2-5-5-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </button>
              <span class="text-xs text-slate-400">Demo only. Messages aren’t actually sent.</span>
            </div>
            <div id="contactSuccess" class="hidden mt-2 rounded-xl border border-emerald-500/30 bg-emerald-500/10 text-emerald-200 px-4 py-3">
              ✅ Thanks! Your message has been received (demo).
            </div>
          </form>
        </div>

        <div class="p-6 sm:p-8 rounded-2xl glass border border-white/10">
          <h4 class="text-lg font-semibold">Connect</h4>
          <p class="text-slate-300 mt-1">Follow and reach out through these channels.</p>
          <div class="mt-6 grid grid-cols-3 sm:grid-cols-4 gap-4">
            <a href="#" class="group rounded-xl bg-[#0f1a2e] border border-white/10 p-4 flex flex-col items-center hover:bg-white/10 transition">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" class="text-slate-200 group-hover:scale-105 transition"><path d="M21.5 6.8c-.6.3-1.2.5-1.9.6.7-.4 1.2-1.1 1.5-1.9-.6.4-1.4.7-2.1.9A3.3 3.3 0 0 0 12 8.7c0 .3 0 .6.1.9A9.4 9.4 0 0 1 3.3 5.7a3.3 3.3 0 0 0 1 4.4c-.5 0-1-.2-1.4-.4v.1c0 1.6 1.1 3 2.6 3.3-.3.1-.7.1-1 .1-.2 0-.5 0-.7-.1a3.4 3.4 0 0 0 3.1 2.3 6.7 6.7 0 0 1-4.1 1.4H2a9.4 9.4 0 0 0 5.1 1.5c6.1 0 9.5-5.1 9.5-9.5v-.4c.6-.4 1.2-1 1.6-1.6z"/></svg>
              <span class="mt-2 text-xs text-slate-400">Twitter</span>
            </a>
            <a href="#" class="group rounded-xl bg-[#0f1a2e] border border-white/10 p-4 flex flex-col items-center hover:bg-white/10 transition">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" class="text-slate-200 group-hover:scale-105 transition"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 5 2.12 5 3.5zM.5 8h4V23h-4V8zm7 0h3.8v2.1h.1c.5-1 1.8-2.1 3.8-2.1 4.1 0 4.8 2.7 4.8 6.2V23h-4v-6.6c0-1.6 0-3.6-2.2-3.6s-2.6 1.7-2.6 3.5V23h-4V8z"/></svg>
              <span class="mt-2 text-xs text-slate-400">LinkedIn</span>
            </a>
            <a href="#" class="group rounded-xl bg-[#0f1a2e] border border-white/10 p-4 flex flex-col items-center hover:bg-white/10 transition">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" class="text-slate-200 group-hover:scale-105 transition"><path d="M12 .5A11.5 11.5 0 0 0 .5 12 11.5 11.5 0 0 0 8 23.3c.6.1.8-.2.8-.5v-2c-3.3.7-4-1.4-4-1.4-.5-1.2-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.6 1.2 1.6 1.2 1 1.6 2.7 1.1 3.4.9.1-.7.4-1.1.7-1.4-2.6-.3-5.3-1.3-5.3-6 0-1.3.5-2.4 1.2-3.3-.1-.3-.5-1.6.1-3.2 0 0 1-.3 3.4 1.2a12 12 0 0 1 6.2 0c2.4-1.5 3.4-1.2 3.4-1.2.6 1.6.2 2.9.1 3.2.8.9 1.2 2 1.2 3.3 0 4.8-2.7 5.8-5.3 6 .4.3.8 1 .8 2.1v3.1c0 .3.1.6.8.5A11.5 11.5 0 0 0 23.5 12 11.5 11.5 0 0 0 12 .5z"/></svg>
              <span class="mt-2 text-xs text-slate-400">GitHub</span>
            </a>
            <a href="#" class="group rounded-xl bg-[#0f1a2e] border border-white/10 p-4 flex flex-col items-center hover:bg-white/10 transition">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-slate-200 group-hover:scale-105 transition"><path d="M4 7h16M12 4v16M4 17h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span class="mt-2 text-xs text-slate-400">Website</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-slate-400 text-sm">© <span id="year"></span> Traffic Simulator. All rights reserved.</p>
      <div class="flex items-center gap-3">
        <span class="text-xs text-slate-500">Demo: local device only</span>
      </div>
    </div>
  </footer>

  <!-- Accounts Modal -->
  <div id="accountsModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop transition-opacity modal-hidden">
    <div class="mx-4 w-full max-w-2xl rounded-2xl glass border border-white/0 shadow-2xl">
      <div class="flex items-center justify-between px-6 py-4 border-b border-white/10">
        <div>
          <h4 class="text-lg font-semibold">Saved Accounts</h4>
          <p class="text-slate-400 text-sm">Stored locally in your browser</p>
        </div>
        <button id="closeModal" class="h-10 w-10 grid place-items-center rounded-xl hover:bg-white/10 transition" aria-label="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="p-6">
        <div id="emptyState" class="hidden rounded-xl border border-white/10 bg-white/5 p-6 text-slate-300">
          No saved accounts yet. Submit the form to add one.
        </div>
        <div id="listWrapper" class="space-y-3 max-h-80 overflow-auto pr-1"></div>
        <div class="mt-5 flex items-center justify-between gap-3">
          <div class="text-xs text-slate-400">
            Entries: <span id="entryCount">0</span>
          </div>
          <div class="flex items-center gap-2">
            <button id="exportJsonBtn" class="rounded-xl px-4 py-2 bg-sky-600/90 text-white hover:bg-sky-600 transition">Export JSON</button>
            <button id="clearAllBtn" class="rounded-xl px-4 py-2 bg-rose-600/90 text-white hover:bg-rose-600 transition">Clear all</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Login Slide-over -->
  <div id="loginWrap" class="slideover-wrap fixed inset-0 z-[60]">
    <div id="loginBackdrop" class="slideover-backdrop absolute inset-0 opacity-0"></div>
    <aside id="loginPanel" class="slideover-panel absolute right-0 top-0 p-6 sm:p-8">
      <div class="flex items-start justify-between">
        <div>
          <div class="flex items-center gap-3">
            <span class="inline-grid place-items-center h-10 w-10 rounded-xl bg-gradient-to-br from-sky-500 to-emerald-500 text-white">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="6" y="2" width="12" height="20" rx="3" stroke="white"/><circle cx="12" cy="7" r="2" fill="#ef4444"/><circle cx="12" cy="12" r="2" fill="#f59e0b"/><circle cx="12" cy="17" r="2" fill="#22c55e"/></svg>
            </span>
            <div>
              <h2 class="text-xl font-bold">Welcome back</h2>
              <p class="text-slate-400 text-sm -mt-0.5">Sign in to your account</p>
            </div>
          </div>
        </div>
        <button id="closeLogin" class="h-10 w-10 grid place-items-center rounded-xl hover:bg-white/10 transition" aria-label="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>

      <form id="loginForm" class="mt-6 space-y-4" novalidate>
        <div>
          <label class="block text-sm text-slate-300 mb-2" for="identifier">Email or Phone</label>
          <div class="relative">
            <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 8l9 6 9-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M21 8v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </span>
            <input id="identifier" name="identifier" type="text" required placeholder="owner@example.com or 555-123-4567"
              class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 pl-10 pr-4 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
          </div>
          <p id="idErr" class="mt-2 hidden text-rose-400 text-sm">Enter your email or phone number.</p>
        </div>
        <div>
          <label class="block text-sm text-slate-300 mb-2" for="loginPassword">Password</label>
          <div class="relative">
            <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="4" y="10" width="16" height="10" rx="2" stroke="currentColor" stroke-width="2"/><path d="M8 10V7a4 4 0 0 1 8 0v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </span>
            <input id="loginPassword" name="loginPassword" type="password" required placeholder="Your password"
              class="input-elev w-full rounded-xl bg-[#0b1220]/70 border border-white/10 pl-10 pr-12 py-3 text-slate-100 placeholder-slate-500 focus-ring"/>
            <button type="button" id="togglePwd" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-200 transition" aria-label="Show password">
              <svg id="eyeIcon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg>
            </button>
          </div>
          <p id="pwdErr" class="mt-2 hidden text-rose-400 text-sm">Password is required.</p>
        </div>

        <button type="submit" class="btn-primary w-full inline-flex justify-center items-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-emerald-500 px-5 py-3 font-semibold text-white" onclick="window.location.href='map.html'">
          Log in
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M13 5l6 7-6 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <p id="loginMsg" class="hidden mt-3 rounded-xl border px-4 py-3 text-sm"></p>

        <div class="border-t border-white/10 pt-4 mt-4">
          <p class="text-xs text-slate-500">
            Demo only. Matches accounts saved locally from the registration form.
          </p>
        </div>
      </form>
    </aside>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-50 hidden">
    <div class="rounded-xl px-4 py-3 bg-emerald-600 text-white shadow-lg">Saved locally!</div>
  </div>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuIcon = document.getElementById('menuIcon');
    let menuOpen = false;
    if(menuBtn){
      menuBtn.addEventListener('click', () => {
        menuOpen = !menuOpen;
        mobileMenu.classList.toggle('hidden', !menuOpen);
        menuIcon.innerHTML = menuOpen
          ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6l12 12M6 18L18 6" />'
          : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />';
      });
    }

    // Local Storage helpers
    const STORAGE_KEY = 'traffic_sim_saved_accounts_v1';
    const PWD_MAP_KEY = 'traffic_sim_password_map_v1';
    function readAccounts(){ try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); } catch { return []; } }
    function writeAccounts(list){ localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); }
    function readPwdMap(){ try { return JSON.parse(localStorage.getItem(PWD_MAP_KEY) || '{}'); } catch { return {}; } }
    function writePwdMap(map){ localStorage.setItem(PWD_MAP_KEY, JSON.stringify(map)); }

    // Registration validation + save
    const form = document.getElementById('signupForm');
    const fullName = document.getElementById('fullName');
    const email = document.getElementById('email');
    const pass = document.getElementById('password');
    const confirm = document.getElementById('confirm');
    const vehicleType = document.getElementById('vehicleType');
    const plate = document.getElementById('plate');
    const phone = document.getElementById('phone');
    const success = document.getElementById('success');

    const nameErr = document.getElementById('nameErr');
    const emailErr = document.getElementById('emailErr');
    const passErr = document.getElementById('passErr');
    const confirmErr = document.getElementById('confirmErr');
    const vehicleTypeErr = document.getElementById('vehicleTypeErr');
    const plateErr = document.getElementById('plateErr');
    const phoneErr = document.getElementById('phoneErr');

    function show(el){ el.classList.remove('hidden'); }
    function hide(el){ el.classList.add('hidden'); }
    function showToast(msg='Saved locally!'){
      const toast = document.getElementById('toast');
      toast.querySelector('div').textContent = msg;
      toast.classList.remove('hidden');
      setTimeout(()=> toast.classList.add('hidden'), 2200);
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      let ok = true;

      if(!fullName.value.trim()){ show(nameErr); ok=false; } else hide(nameErr);
      if(!email.value.trim() || !/^\S+@\S+\.\S+$/.test(email.value)){ show(emailErr); ok=false; } else hide(emailErr);
      if(!pass.value || pass.value.length < 6){ show(passErr); ok=false; } else hide(passErr);
      if(confirm.value !== pass.value || !confirm.value){ show(confirmErr); ok=false; } else hide(confirmErr);
      if(!vehicleType.value){ show(vehicleTypeErr); ok=false; } else hide(vehicleTypeErr);
      if(!plate.value.trim()){ show(plateErr); ok=false; } else hide(plateErr);
      if(!phone.value.trim() || phone.value.replace(/\D/g, '').length < 7){ show(phoneErr); ok=false; } else hide(phoneErr);

      if(ok){
        const entry = {
          id: Date.now(),
          ownerName: fullName.value.trim(),
          email: email.value.trim(),
          vehicleType: vehicleType.value,
          plate: plate.value.trim(),
          phone: phone.value.trim(),
          createdAt: new Date().toISOString()
        };
        const list = readAccounts();
        list.push(entry);
        writeAccounts(list);

        // Store password mapped to both email and phone for demo login
        const pwdMap = readPwdMap();
        if(entry.email) pwdMap['email:' + entry.email.toLowerCase()] = pass.value;
        if(entry.phone) pwdMap['phone:' + entry.phone.replace(/\D/g,'')] = pass.value;
        writePwdMap(pwdMap);

        hide(nameErr); hide(emailErr); hide(passErr); hide(confirmErr);
        hide(vehicleTypeErr); hide(plateErr); hide(phoneErr);
        show(success); showToast('Account saved locally');
        form.reset();
        vehicleType.selectedIndex = 0;
        setTimeout(()=> success.classList.add('hidden'), 4000);
      }
    });

    // Contact form demo handling
    const contactForm = document.getElementById('contactForm');
    const cname = document.getElementById('cname');
    const cemail = document.getElementById('cemail');
    const cmsg = document.getElementById('cmsg');
    const cnameErr = document.getElementById('cnameErr');
    const cemailErr = document.getElementById('cemailErr');
    const cmsgErr = document.getElementById('cmsgErr');
    const contactSuccess = document.getElementById('contactSuccess');

    if(contactForm){
      contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        let ok = true;
        if(!cname.value.trim()){ cnameErr.classList.remove('hidden'); ok=false; } else cnameErr.classList.add('hidden');
        if(!cemail.value.trim() || !/^\S+@\S+\.\S+$/.test(cemail.value)){ cemailErr.classList.remove('hidden'); ok=false; } else cemailErr.classList.add('hidden');
        if(!cmsg.value.trim()){ cmsgErr.classList.remove('hidden'); ok=false; } else cmsgErr.classList.add('hidden');
        if(!ok) return;
        contactSuccess.classList.remove('hidden');
        contactForm.reset();
        setTimeout(()=> contactSuccess.classList.add('hidden'), 3500);
      });
    }

    // Simulator teaser: cars
    const carField = document.getElementById('carField');
    const densityButtons = {
      low: document.getElementById('densityLow'),
      med: document.getElementById('densityMed'),
      high: document.getElementById('densityHigh'),
    };
    function makeCar(x, y, color){
      const car = document.createElement('div');
      car.className = 'absolute';
      car.style.left = x + 'px'; car.style.top = y + 'px';
      car.innerHTML = `<div class="w-6 h-3 rounded-md" style="background:${color}; box-shadow:0 2px 0 rgba(0,0,0,.35)"></div>`;
      car.animate([{transform:'translateX(-8px)'},{transform:'translateX(8px)'},{transform:'translateX(-8px)'}], {duration: 3000 + Math.random()*2000, iterations: Infinity, easing: 'ease-in-out'});
      return car;
    }
    function populateCars(count){
      const current = Array.from(carField.children);
      if(current.length > count){ for(let i=current.length-1; i>=count; i--) carField.removeChild(current[i]); }
      else { for(let i=current.length; i<count; i++){
        const lanesY=[70,90,150,170,230,50,110,190];
        const colsX=[40,90,140,200,260,320,380,440,500,560];
        const y=lanesY[Math.floor(Math.random()*lanesY.length)];
        const x=colsX[Math.floor(Math.random()*colsX.length)];
        const color=['#38bdf8','#34d399','#60a5fa','#22c55e','#0ea5e9'][Math.floor(Math.random()*5)];
        carField.appendChild(makeCar(x,y,color));
      } }
    }
    densityButtons.low.addEventListener('click', ()=> populateCars(6));
    densityButtons.med.addEventListener('click', ()=> populateCars(14));
    densityButtons.high.addEventListener('click', ()=> populateCars(26));
    populateCars(12);

    // Accounts Modal
    const accountsModal = document.getElementById('accountsModal');
    const viewAccountsBtn = document.getElementById('viewAccountsBtn');
    const closeModal = document.getElementById('closeModal');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const exportJsonBtn = document.getElementById('exportJsonBtn');
    const listWrapper = document.getElementById('listWrapper');
    const emptyState = document.getElementById('emptyState');
    const entryCount = document.getElementById('entryCount');

    function openModal(){ accountsModal.classList.remove('modal-hidden'); accountsModal.classList.add('modal-shown'); renderAccounts(); }
    function closeModalFn(){ accountsModal.classList.add('modal-hidden'); accountsModal.classList.remove('modal-shown'); }
    if(viewAccountsBtn){ viewAccountsBtn.addEventListener('click', openModal); }
    if(closeModal){ closeModal.addEventListener('click', closeModalFn); }
    accountsModal.addEventListener('click', (e)=> { if(e.target === accountsModal) closeModalFn(); });
    document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') { closeModalFn(); closeLoginPanel(); } });

    function renderAccounts(){
      const data = readAccounts().sort((a,b)=> b.id - a.id);
      listWrapper.innerHTML = '';
      entryCount.textContent = data.length;
      if(data.length === 0){ emptyState.classList.remove('hidden'); return; }
      emptyState.classList.add('hidden');

      data.forEach(item => {
        const row = document.createElement('div');
        row.className = 'rounded-xl border border-white/15 bg-[#0b172a]/80 p-4 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 shadow-lg';
        row.innerHTML = `
          <div class="flex-1">
            <div class="font-semibold">${escapeHtml(item.ownerName)} <span class="text-slate-400 font-normal">• ${escapeHtml(item.vehicleType)}</span></div>
            <div class="text-sm text-slate-300 mt-1">${escapeHtml(item.email)} • ${escapeHtml(item.phone)}</div>
            <div class="text-xs text-slate-400 mt-1">Plate: ${escapeHtml(item.plate)} • ${formatDate(item.createdAt)}</div>
          </div>
          <div class="flex items-center gap-2">
            <button data-id="${item.id}" class="copyBtn rounded-lg px-3 py-2 glass hover:bg-white/10 text-sm">Copy</button>
            <button data-id="${item.id}" class="deleteBtn rounded-lg px-3 py-2 bg-rose-600/80 hover:bg-rose-600 text-white text-sm">Delete</button>
          </div>
        `;
        listWrapper.appendChild(row);
      });

      listWrapper.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = Number(btn.getAttribute('data-id'));
          const updated = readAccounts().filter(a => a.id !== id);
          writeAccounts(updated);
          renderAccounts();
          showToast('Deleted');
        });
      });
      listWrapper.querySelectorAll('.copyBtn').forEach(btn => {
        btn.addEventListener('click', async () => {
          const id = Number(btn.getAttribute('data-id'));
          const item = readAccounts().find(a => a.id === id);
          if(!item) return;
          const text = `Owner: ${item.ownerName}
Email: ${item.email}
Vehicle: ${item.vehicleType}
Plate: ${item.plate}
Phone: ${item.phone}
Created: ${formatDate(item.createdAt)}`;
          try { await navigator.clipboard.writeText(text); showToast('Copied to clipboard'); }
          catch { showToast('Copy failed'); }
        });
      });
    }

    clearAllBtn.addEventListener('click', () => {
      const data = readAccounts();
      if(data.length === 0){ showToast('Nothing to clear'); return; }
      const ok = confirm('Clear all saved accounts from this browser?');
      if(!ok) return;
      writeAccounts([]);
      writePwdMap({});
      renderAccounts();
      showToast('All cleared');
    });

    exportJsonBtn.addEventListener('click', () => {
      const data = readAccounts();
      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'traffic-accounts.json';
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      showToast('Exported JSON');
    });

    function formatDate(iso){ return new Date(iso).toLocaleString(); }
    function escapeHtml(str){ return String(str).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    // Slide-over Login logic
    const loginWrap = document.getElementById('loginWrap');
    const loginBackdrop = document.getElementById('loginBackdrop');
    const openLoginLink = document.getElementById('openLogin');
    const closeLoginBtn = document.getElementById('closeLogin');
    const loginForm = document.getElementById('loginForm');
    const identifier = document.getElementById('identifier');
    const loginPassword = document.getElementById('loginPassword');
    const idErr = document.getElementById('idErr');
    const pwdErr = document.getElementById('pwdErr');
    const loginMsg = document.getElementById('loginMsg');
    const togglePwd = document.getElementById('togglePwd');
    const eyeIcon = document.getElementById('eyeIcon');

    function openLoginPanel(){
      loginWrap.classList.add('open');
      loginBackdrop.style.opacity = '1';
      setTimeout(()=> identifier.focus(), 180);
    }
    function closeLoginPanel(){
      loginBackdrop.style.opacity = '0';
      loginWrap.classList.remove('open');
      loginMsg.classList.add('hidden');
    }
    if(openLoginLink){ openLoginLink.addEventListener('click', (e)=> { e.preventDefault(); openLoginPanel(); }); }
    if(closeLoginBtn){ closeLoginBtn.addEventListener('click', closeLoginPanel); }
    loginBackdrop.addEventListener('click', closeLoginPanel);

    // Toggle password visibility
    togglePwd.addEventListener('click', () => {
      const isPwd = loginPassword.type === 'password';
      loginPassword.type = isPwd ? 'text' : 'password';
      eyeIcon.innerHTML = isPwd
        ? '<path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z" stroke="currentColor" stroke-width="2"/><path d="M12 9a3 3 0 1 1 0 6" stroke="currentColor" stroke-width="2" fill="none"/>'
        : '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>';
    });

    function loginShow(el){ el.classList.remove('hidden'); }
    function loginHide(el){ el.classList.add('hidden'); }

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      let ok = true;
      if(!identifier.value.trim()){ loginShow(idErr); ok=false; } else loginHide(idErr);
      if(!loginPassword.value){ loginShow(pwdErr); ok=false; } else loginHide(pwdErr);
      if(!ok) return;

      const idVal = identifier.value.trim();
      const pwd = loginPassword.value;
      const map = readPwdMap();

      const keyEmail = 'email:' + idVal.toLowerCase();
      const keyPhone = 'phone:' + idVal.replace(/\D/g,'');
      const expected = map[keyEmail] ?? map[keyPhone];

      if(expected && expected === pwd){
        loginMsg.textContent = '✅ Login successful! (Demo)';
        loginMsg.className = 'mt-3 rounded-xl border border-emerald-500/30 bg-emerald-500/10 text-emerald-200 px-4 py-3 text-sm';
        loginShow(loginMsg);
        setTimeout(closeLoginPanel, 900);
      } else {
        loginMsg.textContent = '❌ Invalid credentials. Please check your email/phone and password.';
        loginMsg.className = 'mt-3 rounded-xl border border-rose-500/30 bg-rose-500/10 text-rose-200 px-4 py-3 text-sm';
        loginShow(loginMsg);
      }
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f9a6f43302c1ce',t:'MTc1Nzk1NTMzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

